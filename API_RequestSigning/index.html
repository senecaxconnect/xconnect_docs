
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="xConnect Documentation">
      
      
      
        <meta name="author" content="Seneca">
      
      
        <link rel="canonical" href="https://senecaxconnect.github.io/xconnect_docs/API_RequestSigning/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>API Request Signing - xConnect Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/codehilite.css">
    
      <link rel="stylesheet" href="../stylesheets/mermaid.css">
    
      <link rel="stylesheet" href="../stylesheets/site.css">
    
    
      


    
    
<meta name="theme-color" content="#808080">

<link rel='icon' href='/assets/images/favicon.ico'>

<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='mobile-web-app-capable' content='yes'>
<link rel="manifest" href="/manifest.json">
<style type="text/css">
    .mermaid {
        text-align: left;
        font-size: 10pt;
    }
</style>

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="light-blue">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-request-signing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="xConnect Documentation" class="md-header__button md-logo" aria-label="xConnect Documentation" data-md-component="logo">
      
  <img src="../images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            xConnect Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Request Signing
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/senecaxconnect/xconnect_docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    senecaxconnect/xconnect_docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="xConnect Documentation" class="md-nav__button md-logo" aria-label="xConnect Documentation" data-md-component="logo">
      
  <img src="../images/logo.svg" alt="logo">

    </a>
    xConnect Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/senecaxconnect/xconnect_docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    senecaxconnect/xconnect_docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Platform
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Platform" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Platform
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Platform_Overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Agent_Overview/" class="md-nav__link">
        Server Agent
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Gateway_Overview/" class="md-nav__link">
        Gateway
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Dashboard_Overview/" class="md-nav__link">
        Web Dashboard
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Getting_Started/" class="md-nav__link">
        Quick Start Guide
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        Step 1 - Gateway Setup
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Step 1 - Gateway Setup" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Step 1 - Gateway Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Gateway_Virtual/" class="md-nav__link">
        Virtual Gateway
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Gateway_TurnKey/" class="md-nav__link">
        Physical/Turnkey Appliance
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Gateway_Docker/" class="md-nav__link">
        Self-Hosted Docker Container
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Agent_Install/" class="md-nav__link">
        Step 2 - Install Agent
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Dashboard_Setup/" class="md-nav__link">
        Step 3 - Web Dashboard
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Dashboard Usage Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Dashboard Usage Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Dashboard Usage Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_Dashboards/" class="md-nav__link">
        Dashboards
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_Bookmarks/" class="md-nav__link">
        Bookmarks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_Roles/" class="md-nav__link">
        User Types
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_SideNav/" class="md-nav__link">
        Navigation
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      <label class="md-nav__link" for="__nav_3_5">
        Management
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Management" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_ManageCustomers/" class="md-nav__link">
        Customers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_ManageUsers/" class="md-nav__link">
        Users
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_ManageGateways/" class="md-nav__link">
        Gateways
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_ManageDevices/" class="md-nav__link">
        Devices
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_ManageEventConfigurations/" class="md-nav__link">
        Event Configurations
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_ManageEmailProfiles/" class="md-nav__link">
        Email Profiles
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_ManageRemoteCommands/" class="md-nav__link">
        Remote Commands
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_ManageConnectors/" class="md-nav__link">
        3rd Party Connectors
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Usage_EventLogs/" class="md-nav__link">
        Event Logs
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Additional Documentation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Additional Documentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Additional Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Network_Requirements/" class="md-nav__link">
        Network Requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Agent_API/" class="md-nav__link">
        Agent API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Auth_AzureAD/" class="md-nav__link">
        Azure-Based Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Setup_GenetecIntegration/" class="md-nav__link">
        Genetec Integration
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      <label class="md-nav__link" for="__nav_5">
        Developer Documentation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Developer Documentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Developer Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          API Request Signing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        API Request Signing
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-create-a-canonical-request-for-signing" class="md-nav__link">
    Step 1: Create a Canonical Request for signing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-create-the-string-to-sign" class="md-nav__link">
    Step 2: Create the string to sign
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-create-the-signing-key" class="md-nav__link">
    Step 3: Create the signing key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-create-the-final-signature" class="md-nav__link">
    Step 4: Create the final signature
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-add-required-headers-to-request-and-submit" class="md-nav__link">
    Step 5: Add required headers to request and submit
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Support/" class="md-nav__link">
        Support
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Release_Notes/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-create-a-canonical-request-for-signing" class="md-nav__link">
    Step 1: Create a Canonical Request for signing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-create-the-string-to-sign" class="md-nav__link">
    Step 2: Create the string to sign
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-create-the-signing-key" class="md-nav__link">
    Step 3: Create the signing key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-create-the-final-signature" class="md-nav__link">
    Step 4: Create the final signature
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-add-required-headers-to-request-and-submit" class="md-nav__link">
    Step 5: Add required headers to request and submit
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/senecaxconnect/xconnect_docs/edit/master/docs/API_RequestSigning.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="api-request-signing">API Request Signing</h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>**The following applies to the xConnect and Asset Management APIs</p>
<p><a href="https://assetmgmt-api.senecaxconnect.com">https://assetmgmt-api.senecaxconnect.com</a></p>
<p><a href="https://api.senecaxconnect.com">https://api.senecaxconnect.com</a></p>
</div>
<p>All HTTP API requests into the xConnect Platform must be signed by the client application and validated by the Asset Management/xConnect API Platform to ensure they come from authenticated clients. There are 2 important pieces of information - apiKey and secretKey that can be obtained from the cloud portal and embedded into the client application for signing requests. It's recommended that these keys are stored encrypted on the client side.</p>
<p>For example in this document, we use the following keys</p>
<p>apiKey</p>
<p><code>5501f50fdc62aee5d04dbd6a58b68b781ee2aaade8ad1eb24b1e4e77cb282ae2</code></p>
<p>secretKey</p>
<p><code>ARAzUzRzekFwRTNACBQYUx89LlZyImhKFVloHUVMDw8EGRxxSCckFgdFPysAAWJCLDgMdkstZzw3GGVqNHxXcno5Iz54LRBSKy0TaCBwNndkfQNdD38KAA==</code></p>
<p>The client application needs to process the API request details using 5 steps explained below. The input parameters include such information as the URL, HTTP method, query string, JSON payload, HTTP headers, the security keys, etc. The computation outcome is a signature value which is included in the HTTP header.</p>
<h2 id="step-1-create-a-canonical-request-for-signing">Step 1: Create a Canonical Request for signing</h2>
<p>The first step is to build a string representation of your request in a pre-defined format.</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="n">canonicalRequest</span> <span class="o">=</span>
    <span class="n">httpRequestMethod</span> <span class="o">+</span> <span class="sc">&#39;\n&#39;</span>  <span class="o">+</span>
    <span class="n">canonicalURI</span> <span class="o">+</span> <span class="sc">&#39;\n&#39;</span> <span class="o">+</span>
    <span class="n">canonicalQueryString</span> <span class="o">+</span> <span class="sc">&#39;\n&#39;</span> <span class="o">+</span>
    <span class="n">hexEncode</span><span class="p">(</span><span class="n">hash</span><span class="p">(</span><span class="n">payload</span><span class="p">));</span>
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">Python</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="n">hexEncode</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_payload</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="k">if</span> <span class="n">url_query_params</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
    <span class="n">canonicalRequest</span> <span class="o">=</span> <span class="n">httpRequestMethod</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">canonicalURI</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">query_params_to_encrypt</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">hexEncode</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">canonicalRequest</span> <span class="o">=</span> <span class="n">httpRequestMethod</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">canonicalURI</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">hexEncode</span>
</code></pre></div>
</div>
</div>
<p>httpRequestMethod</p>
<p>Put one of the following methods in a line by itself - GET, POST, PUT, PATCH</p>
<p>POST</p>
<p>canonicalURI</p>
<p>The canonical URI is the URI-encoded version of the absolute path component of the URI, which is everything in the URI from the HTTP host to the question mark character ("?") that begins the query string parameters (if any).</p>
<p><code>/api/v1/kronos/gateways</code></p>
<p>canonicalQueryString</p>
<p>Create each line containing a name/value pair in the format name=value. Name field is converted to lowercase and URL-encoded.
Sort all the lines in ascending order</p>
<p>Example QueryString:
<div class="highlight"><pre><span></span><code>lastName=Doe&amp;firstName=Jane&amp;Age=30


age=30
firstname=Jane
lastname=Doe
hexEncode(hash(payload))
</code></pre></div></p>
<p>The payload (if any) is most likely in JSON format. If there's no payload, use an empty string
Hash the payload content with SHA-256
Hex-encode the hash value
Convert the hex-encoded value to lowercase
Example of an empty payload:</p>
<p>e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
Combining all of the results above produces the following string:</p>
<p>POST
/api/v1/kronos/gateways
age=30
firstname=Jane
lastname=Doe
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855</p>
<p>Finally, hash this computed canonical request, hex-encode and lowercase it. This is the result of step 1.</p>
<p><code>5a2d3589ffb15fab720069fbd26fd8e8311a1c7047e5899608faff450df6d7dc</code></p>
<h2 id="step-2-create-the-string-to-sign">Step 2: Create the string to sign</h2>
<div class="tabbed-set" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="n">stringtoSign</span> <span class="o">=</span>
     <span class="n">hashedCanonicalRequest</span> <span class="o">+</span> <span class="sc">&#39;\n&#39;</span> <span class="o">+</span>
     <span class="n">apiKey</span> <span class="o">+</span> <span class="sc">&#39;\n&#39;</span> <span class="o">+</span>
     <span class="n">requestTimestamp</span> <span class="o">+</span> <span class="sc">&#39;\n&#39;</span> <span class="o">+</span>
     <span class="n">apiversion</span><span class="p">;</span>
</code></pre></div>
</div>
</div>
<p>hashedCanonicalRequest</p>
<p>This is the result of step 1</p>
<p><code>5a2d3589ffb15fab720069fbd26fd8e8311a1c7047e5899608faff450df6d7dc</code></p>
<p>apiKey</p>
<p>Provided apiKey from xConnect team (<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#115;&#101;&#110;&#101;&#99;&#97;&#120;&#99;&#111;&#110;&#110;&#101;&#99;&#116;&#46;&#99;&#111;&#109;">&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#115;&#101;&#110;&#101;&#99;&#97;&#120;&#99;&#111;&#110;&#110;&#101;&#99;&#116;&#46;&#99;&#111;&#109;</a>)</p>
<p><code>5501f50fdc62aee5d04dbd6a58b68b781ee2aaade8ad1eb24b1e4e77cb282ae2</code></p>
<p>requestTimestamp</p>
<p>Current UTC time in ISO-8601 format - YYYY-MM-DDThhðŸ‡²ðŸ‡²s.sssZ</p>
<p><code>2016-04-12T14:28:36.218Z</code></p>
<p>apiVersion</p>
<p>Version is 1</p>
<p>1</p>
<p>Combining all of the results above produces the following string. This is the result of step 2.</p>
<div class="highlight"><pre><span></span><code>5a2d3589ffb15fab720069fbd26fd8e8311a1c7047e5899608faff450df6d7dc
5501f50fdc62aee5d04dbd6a58b68b781ee2aaade8ad1eb24b1e4e77cb282ae2
2016-04-12T14:28:36.218Z
1
</code></pre></div>
<h2 id="step-3-create-the-signing-key">Step 3: Create the signing key</h2>
<p>In this step we're going to use the HMAC-SHA256 algorithm a few times to generate the signing key. In the pseudocode, it'll be shown as hmacSha256(key, data). Note the order of the input parameters because if you're using some third-party library for this function, the order of the input parameters might be reversed. The output of this function is in binary, hence note the hex-encode function being used below</p>
<p>Java</p>
<p>signingKey = secretKey;
signingKey = hexEncode(hmacSha256(apiKey, signingKey));
signingKey = hexEncode(hmacSha256(requestTimestamp, signingKey));
signingKey = hexEncode(hmacSha256(apiVersion, signingKey));
secretKey</p>
<p>Provided secretKey from Kronos portal</p>
<p>apiKey</p>
<p>Provided apiKey from Arrow Connect portal</p>
<p>requestTimestamp</p>
<p>Must be the same value as in step 2</p>
<p>apiVersion</p>
<p>Must be the same value as in step 2</p>
<p>For the example in this guide, here's the output of this step. This is the result of step 3</p>
<p>signingKey =
ARAzUzRzekFwRTNACBQYUx89LlZyImhKFVloHUVMDw8EGRxxSCckFgdFPysAAWJCLDgMdkstZzw3GGVqNHxXcno5Iz54LRBSKy0TaCBwNndkfQNdD38KAA==
signingKey = 3c6e85f6a719e5b8bd77fde0cbdbe19d947f38451afbc8ef6e49a083d86a9c54
signingKey = 3223bf9bc2d2180046cc40c2e1ed6f9d08261a6c4a394b23c5311e83633a8ef7
signingKey = d0d1518fc5290c22f1444d46d9c08dd03cc33c6fdad8bbcd57be65b1e2b0b493</p>
<h2 id="step-4-create-the-final-signature">Step 4: Create the final signature</h2>
<p>The signature is computed by signing the result from step 2 and step 3</p>
<p>Java</p>
<p>signature = hexEncode(hmacSha256(signingKey, stringToSign)
signingKey</p>
<p>Result of step 3</p>
<p>stringToSign</p>
<p>Result of step 2</p>
<p>Result of step 4 is below</p>
<p>28c3ab6cc82294b61e9b2855b428090e474fd1e066c4da63f9715bd2204df553</p>
<h2 id="step-5-add-required-headers-to-request-and-submit">Step 5: Add required headers to request and submit</h2>
<p>x-arrow-apikey:     Provided apiKey
x-arrow-date:       requestTimestamp from step 2
x-arrow-version:    apiVersion from step 2
x-arrow-signature:  final signature from step 4</p>
<div class="highlight"><pre><span></span><code>x-arrow-apikey: 5501f50fdc62aee5d04dbd6a58b68b781ee2aaade8ad1eb24b1e4e77cb282ae2
x-arrow-date: 2016-04-12T14:28:36.218Z
x-arrow-version: 1
x-arrow-signature: 28c3ab6cc82294b61e9b2855b428090e474fd1e066c4da63f9715bd2204df553
</code></pre></div>
<h1 id="complete-api-request-example">Complete API Request Example</h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>**The Java example simply generates the signed token. You must use the signature within a tool such as Postman to perform the full request.</p>
</div>
<div class="tabbed-set" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">Java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">generateSignedRequestToken</span><span class="p">()</span> <span class="p">{</span>

     <span class="n">String</span> <span class="n">API_KEY</span> <span class="o">=</span> <span class="s">&quot;Your_Raw_API_key&quot;</span><span class="p">;</span>
     <span class="n">String</span> <span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">&quot;Your_Raw_Secret_key&quot;</span><span class="p">;</span>
     <span class="n">String</span> <span class="n">apiMethodUri</span> <span class="o">=</span> <span class="s">&quot;/api/v1/kronos/devices&quot;</span><span class="p">;</span>
     <span class="n">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="n">Instant</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span>
     <span class="n">String</span> <span class="n">httpRequestMethod</span> <span class="o">=</span> <span class="s">&quot;GET&quot;</span><span class="p">;</span>
     <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">uriParameters</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
     <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">uriParametersMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
     <span class="n">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>

     <span class="k">try</span> <span class="p">{</span>
            <span class="c1">// region Specify query parameters here</span>
            <span class="n">uriParametersMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;_page&quot;</span><span class="p">,</span> <span class="s">&quot;0&quot;</span><span class="p">);</span>
            <span class="n">uriParametersMap</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;_size&quot;</span><span class="p">,</span> <span class="s">&quot;100&quot;</span><span class="p">);</span>
            <span class="c1">// endregion</span>

            <span class="k">for</span> <span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="p">:</span> <span class="n">uriParametersMap</span><span class="p">.</span><span class="na">entrySet</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">entry</span><span class="p">.</span><span class="na">getKey</span><span class="p">();</span>
                <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">entry</span><span class="p">.</span><span class="na">getValue</span><span class="p">();</span>
                <span class="k">try</span> <span class="p">{</span>
                    <span class="n">uriParameters</span><span class="p">.</span><span class="na">add</span><span class="p">(</span>
                            <span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%s=%s&quot;</span><span class="p">,</span> <span class="n">URLEncoder</span><span class="p">.</span><span class="na">encode</span><span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="na">toLowerCase</span><span class="p">(),</span> <span class="n">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">.</span><span class="na">toString</span><span class="p">()),</span>
                                    <span class="n">AcsUtils</span><span class="p">.</span><span class="na">trimToEmpty</span><span class="p">(</span><span class="n">value</span><span class="p">)));</span>
                <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// ignore</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// region Create canonical request</span>
            <span class="n">StringBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="p">();</span>
            <span class="n">builder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">httpRequestMethod</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
            <span class="n">builder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">apiMethodUri</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>

            <span class="c1">// append parameters</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">uriParameters</span><span class="p">.</span><span class="na">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">Collections</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">uriParameters</span><span class="p">);</span>
                <span class="n">uriParameters</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">p</span> <span class="o">-&gt;</span> <span class="n">builder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">p</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">));</span>
            <span class="p">}</span>

            <span class="n">builder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">sha256Hex</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">));</span>
            <span class="n">String</span> <span class="n">canonicalRequest</span> <span class="o">=</span> <span class="n">builder</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
            <span class="c1">// endregion</span>

            <span class="c1">// region Sign the string</span>
            <span class="n">StringBuilder</span> <span class="n">stringToSign</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="p">();</span>
            <span class="n">stringToSign</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">sha256Hex</span><span class="p">(</span><span class="n">canonicalRequest</span><span class="p">)).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
            <span class="n">stringToSign</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">API_KEY</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
            <span class="n">stringToSign</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">timestamp</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
            <span class="n">stringToSign</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">);</span>

            <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256Hex</span><span class="p">(</span>
                    <span class="n">hmacSha256Hex</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span>
                            <span class="n">hmacSha256Hex</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">hmacSha256Hex</span><span class="p">(</span><span class="n">API_KEY</span><span class="p">,</span> <span class="n">SECRET_KEY</span><span class="p">))),</span>
                    <span class="n">stringToSign</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">}</span>
     <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;Signed auth token = &quot;</span> <span class="o">+</span> <span class="n">signature</span><span class="p">);</span>
<span class="p">}</span>

 <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">hmacSha256Hex</span><span class="p">(</span><span class="n">String</span> <span class="n">key</span><span class="p">,</span> <span class="n">String</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">SecretKeySpec</span> <span class="n">signingKey</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SecretKeySpec</span><span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="na">getBytes</span><span class="p">(</span><span class="n">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">),</span> <span class="s">&quot;HmacSha256&quot;</span><span class="p">);</span>
        <span class="n">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="n">Mac</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="s">&quot;HmacSha256&quot;</span><span class="p">);</span>
        <span class="n">mac</span><span class="p">.</span><span class="na">init</span><span class="p">(</span><span class="n">signingKey</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">printHex</span><span class="p">(</span><span class="n">mac</span><span class="p">.</span><span class="na">doFinal</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="na">getBytes</span><span class="p">(</span><span class="n">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">)));</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">AcsRuntimeException</span><span class="p">(</span><span class="s">&quot;error while calculating: &quot;</span> <span class="o">+</span> <span class="s">&quot;HmacSha256&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">sha256Hex</span><span class="p">(</span><span class="n">String</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">printHex</span><span class="p">(</span><span class="n">MessageDigest</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="s">&quot;SHA-256&quot;</span><span class="p">).</span><span class="na">digest</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="na">getBytes</span><span class="p">(</span><span class="n">StandardCharsets</span><span class="p">.</span><span class="na">UTF_8</span><span class="p">)));</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">AcsRuntimeException</span><span class="p">(</span><span class="s">&quot;error while calculating: &quot;</span> <span class="o">+</span> <span class="s">&quot;SHA-256&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">printHex</span><span class="p">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">DatatypeConverter</span><span class="p">.</span><span class="na">printHexBinary</span><span class="p">(</span><span class="n">data</span><span class="p">).</span><span class="na">toLowerCase</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">Python</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span>

<span class="nb">dir</span><span class="p">(</span><span class="n">hashlib</span><span class="p">)</span>

<span class="c1"># Base URL and api method URI here:</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s1">&#39;https://assetmgmt-api.senecaxconnect.com&#39;</span>
<span class="n">api_method_uri</span> <span class="o">=</span> <span class="s1">&#39;/api/v1/kronos/telemetries/devices/</span><span class="si">{deviceHid}</span><span class="s1">/latest&#39;</span>

<span class="c1"># Put API key and Secret Keys (RAW) here:</span>
<span class="c1"># Contact support@senecaxconnect.com for this information.</span>
<span class="n">application_hid</span> <span class="o">=</span> <span class="s2">&quot;your_applicationhid_goes_here&quot;</span>
<span class="n">apiKey</span> <span class="o">=</span> <span class="s1">&#39;api_key_goes_here&#39;</span>
<span class="n">secretKey</span> <span class="o">=</span> <span class="s1">&#39;secret_key_goes_here&#39;</span>
<span class="n">device_hid</span> <span class="o">=</span> <span class="s1">&#39;device_hid_goes_here&#39;</span>

<span class="n">api_method_uri</span> <span class="o">=</span> <span class="n">api_method_uri</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">deviceHid</span><span class="o">=</span><span class="n">device_hid</span><span class="p">)</span>

<span class="c1"># *************************STEP-1 Create a Canonical Request for signing***********</span>
<span class="n">httpRequestMethod</span> <span class="o">=</span> <span class="s1">&#39;GET&#39;</span>

<span class="c1"># Telemetry pull by application hid</span>
<span class="n">canonicalURI</span> <span class="o">=</span> <span class="n">api_method_uri</span>

<span class="c1"># Example on how to handle the from/to timestamps for API calls</span>
<span class="c1"># from_timestamp_raw = datetime.datetime.now() - datetime.timedelta(hours=HOURS_TO_RETRIEVE)</span>
<span class="c1"># to_timestamp_raw = datetime.datetime.now()</span>
<span class="c1"># from_timestamp = from_timestamp_raw.strftime(&#39;%Y-%m-%dT%H:%M:%S.%fZ&#39;)</span>
<span class="c1"># to_timestamp = to_timestamp_raw.strftime(&#39;%Y-%m-%dT%H:%M:%S.%fZ&#39;)</span>

<span class="c1"># Paging variables go here.</span>
<span class="n">PAGE_TO_RETRIEVE</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>
<span class="n">NUM_ITEMS_ON_EACH_PAGE</span> <span class="o">=</span> <span class="s1">&#39;150&#39;</span>

<span class="c1"># Example: URL Query params with timestamp ranges</span>
<span class="c1"># url_query_params = &#39;_page=&#39; + urllib.parse.quote(PAGE_TO_RETRIEVE) + &#39;&amp;&#39; + &#39;_size=&#39; + urllib.parse.quote(NUM_ITEMS_ON_EACH_PAGE) + &#39;&amp;&#39; + &#39;fromTimestamp=&#39; + urllib.parse.quote(from_timestamp) + &quot;&amp;&quot; + &#39;toTimestamp=&#39; + urllib.parse.quote(to_timestamp)</span>
<span class="c1"># query_params_to_encrypt = &#39;_page=&#39; + PAGE_TO_RETRIEVE + &#39;\n&#39; + &#39;_size=&#39; + NUM_ITEMS_ON_EACH_PAGE + &#39;\n&#39; + &#39;fromtimestamp=&#39; + from_timestamp + &#39;\n&#39; + &#39;totimestamp=&#39; + to_timestamp</span>

<span class="c1"># URL query params with paging only</span>
<span class="n">url_query_params</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">query_params_to_encrypt</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="c1"># url_query_params = &#39;_page=&#39; + urllib.parse.quote(PAGE_TO_RETRIEVE) + &#39;&amp;&#39; + &#39;_size=&#39; + urllib.parse.quote(NUM_ITEMS_ON_EACH_PAGE)</span>
<span class="c1"># query_params_to_encrypt = &#39;_page=&#39; + PAGE_TO_RETRIEVE + &#39;\n&#39; + &#39;_size=&#39; + NUM_ITEMS_ON_EACH_PAGE</span>

<span class="c1"># use this to handle any body payloads coming in</span>
<span class="n">body_payload</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

<span class="c1"># print(canonicalQueryString)</span>
<span class="c1"># ************* REQUEST VALUES *************</span>

<span class="n">hexEncode</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">body_payload</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="k">if</span> <span class="n">url_query_params</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
    <span class="n">canonicalRequest</span> <span class="o">=</span> <span class="n">httpRequestMethod</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">canonicalURI</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">query_params_to_encrypt</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">hexEncode</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">canonicalRequest</span> <span class="o">=</span> <span class="n">httpRequestMethod</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">canonicalURI</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">hexEncode</span>

<span class="nb">print</span><span class="p">(</span><span class="n">canonicalRequest</span><span class="p">)</span>

<span class="c1"># ********************STEP-2  Create the string to sign*********************************</span>
<span class="n">hashedCanonicalRequest</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">canonicalRequest</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># Set the current timestamp of the request, API version should be set to 1</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="n">requestTimestamp</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S.</span><span class="si">%f</span><span class="s1">Z&#39;</span><span class="p">)</span>
<span class="n">apiVersion</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

<span class="c1"># Step-2</span>
<span class="n">stringToSign</span> <span class="o">=</span> <span class="n">hashedCanonicalRequest</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">apiKey</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">requestTimestamp</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">apiVersion</span>
<span class="nb">print</span><span class="p">(</span><span class="n">stringToSign</span><span class="p">)</span>

<span class="c1"># ************STEP-3  Create the signing key**********************</span>

<span class="k">def</span> <span class="nf">sign</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># Create the signing key using the function defined above.</span>
<span class="n">signingKey</span> <span class="o">=</span> <span class="n">secretKey</span>
<span class="n">signingKey</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">apiKey</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">signingKey</span><span class="p">)</span>
<span class="n">signingKey</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">requestTimestamp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">signingKey</span><span class="p">)</span>
<span class="n">signingKey</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">apiVersion</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">signingKey</span><span class="p">)</span>

<span class="c1"># ************STEP-4  Create the final signature*******************************</span>
<span class="c1"># Sign the string_to_sign using the signing_key</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">signingKey</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">stringToSign</span><span class="p">)</span>


<span class="c1"># Make the GET call for this API function</span>
<span class="c1"># Example with application HID</span>
<span class="c1"># url = base_url + api_method_uri + application_hid + &quot;?&quot; + url_query_params</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">api_method_uri</span> <span class="o">+</span> <span class="s2">&quot;?&quot;</span> <span class="o">+</span> <span class="n">url_query_params</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Content-type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
    <span class="s1">&#39;x-arrow-apikey&#39;</span><span class="p">:</span> <span class="n">apiKey</span><span class="p">,</span>
    <span class="s1">&#39;x-arrow-date&#39;</span><span class="p">:</span> <span class="n">requestTimestamp</span><span class="p">,</span>
    <span class="s1">&#39;x-arrow-version&#39;</span><span class="p">:</span> <span class="n">apiVersion</span><span class="p">,</span>
    <span class="s1">&#39;x-arrow-signature&#39;</span><span class="p">:</span> <span class="n">signature</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">if</span> <span class="n">r</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
    <span class="c1"># format the content as dictionary objects</span>
    <span class="n">returnedData</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">returnedData</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No telemetry data returned.&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There was no data returned from the API.&#39;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Setup_GenetecIntegration/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Genetec Integration" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Genetec Integration
            </div>
          </div>
        </a>
      
      
        
        <a href="../Support/" class="md-footer__link md-footer__link--next" aria-label="Next: Support" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Support
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 <a href="https://www.senecadata.com"> - Seneca Data Distributors, Inc</a>
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.febc23d1.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@7.0.9/dist/mermaid.min.js"></script>
      
    
  </body>
</html>